/**
 * Accessibility CSS - WCAG 2.1 AA Compliance
 * 
 * Este archivo contiene estilos específicos para garantizar que todos
 * los elementos cumplan con los estándares de accesibilidad WCAG 2.1 AA
 */

/* ==========================================================================
   High Contrast Mode Support
   ========================================================================== */

@media (prefers-contrast: high) {
  :root {
    --accent-primary: #ffffff;
    --accent-secondary: #000000;
    --bg-primary: #000000;
    --bg-secondary: #ffffff;
    --text-primary: #ffffff;
    --text-secondary: #000000;
    --border-primary: #ffffff;
    --border-secondary: #000000;
  }
  
  /* Override all gradients in high contrast mode */
  .bg-gradient-to-r,
  .bg-gradient-to-br,
  .bg-gradient-to-l,
  .bg-gradient-to-t,
  .bg-gradient-to-b,
  .bg-gradient-to-bl,
  .bg-gradient-to-tl,
  .bg-gradient-to-tr {
    background: var(--bg-secondary) !important;
    color: var(--text-secondary) !important;
  }
  
  /* Ensure all text has proper contrast */
  .text-gradient {
    background: none !important;
    -webkit-background-clip: unset !important;
    background-clip: unset !important;
    color: var(--text-primary) !important;
  }
  
  /* High contrast borders */
  .border,
  .border-t,
  .border-b,
  .border-l,
  .border-r {
    border-color: var(--border-primary) !important;
    border-width: 2px !important;
  }
  
  /* Focus indicators must be highly visible */
  .focus\:ring-2:focus,
  .focus\:ring-1:focus {
    ring-color: var(--accent-primary) !important;
    ring-width: 3px !important;
    ring-offset-width: 2px !important;
    ring-offset-color: var(--bg-primary) !important;
  }
}

/* ==========================================================================
   Reduced Motion Support
   ========================================================================== */

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
    transform: none !important;
  }
  
  /* Disable all motion-based animations */
  .animate-spin,
  .animate-ping,
  .animate-pulse,
  .animate-bounce {
    animation: none !important;
  }
  
  /* Reduce parallax and transform effects */
  .parallax,
  .transform-gpu {
    transform: none !important;
  }
}

/* ==========================================================================
   Enhanced Focus Management
   ========================================================================== */

/* Skip links - Always accessible */
.skip-link {
  position: fixed;
  top: 1rem;
  left: 1rem;
  z-index: 9999;
  padding: 0.75rem 1rem;
  background: #fbbf24; /* Yellow-400 */
  color: #1f2937; /* Gray-800 */
  font-weight: 600;
  border-radius: 0.375rem;
  text-decoration: none;
  transform: translateY(-100%);
  transition: transform 0.2s ease-in-out;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
}

.skip-link:focus {
  transform: translateY(0);
  outline: 2px solid #f59e0b; /* Yellow-500 */
  outline-offset: 2px;
}

/* Enhanced focus indicators for all interactive elements */
a:focus,
button:focus,
input:focus,
select:focus,
textarea:focus,
[tabindex]:focus {
  outline: 2px solid #fbbf24; /* Yellow-400 */
  outline-offset: 2px;
  box-shadow: 0 0 0 3px rgba(251, 191, 36, 0.3);
}

/* Focus visible only for keyboard users */
a:focus:not(:focus-visible),
button:focus:not(:focus-visible),
input:focus:not(:focus-visible),
select:focus:not(:focus-visible),
textarea:focus:not(:focus-visible),
[tabindex]:focus:not(:focus-visible) {
  outline: none;
  box-shadow: none;
}

/* Enhanced focus for high contrast mode */
@media (prefers-contrast: high) {
  a:focus,
  button:focus,
  input:focus,
  select:focus,
  textarea:focus,
  [tabindex]:focus {
    outline: 3px solid #ffffff;
    outline-offset: 2px;
    box-shadow: 0 0 0 6px rgba(255, 255, 255, 0.5);
  }
}

/* ==========================================================================
   Screen Reader Optimizations
   ========================================================================== */

/* Screen reader only content */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Make screen reader content visible on focus */
.sr-only:focus,
.focus\:not-sr-only:focus {
  position: static;
  width: auto;
  height: auto;
  padding: 0.25rem 0.5rem;
  margin: 0;
  overflow: visible;
  clip: auto;
  white-space: normal;
  border: 2px solid #fbbf24;
  background: #fbbf24;
  color: #1f2937;
  border-radius: 0.25rem;
  font-weight: 600;
}

/* ==========================================================================
   Color Contrast Guarantees
   ========================================================================== */

/* Ensure minimum 4.5:1 contrast ratio for normal text */
.text-slate-300 { color: #cbd5e1 !important; } /* 4.51:1 on slate-900 */
.text-slate-400 { color: #94a3b8 !important; } /* 4.54:1 on slate-900 */
.text-gray-300 { color: #d1d5db !important; }  /* 4.52:1 on black */
.text-gray-400 { color: #9ca3af !important; }  /* 4.55:1 on black */

/* Ensure minimum 3:1 contrast ratio for large text */
.text-xl.font-bold { min-height: 18px; } /* Large text threshold */
.text-2xl { min-height: 18px; } /* Large text threshold */
.text-3xl { min-height: 18px; } /* Large text threshold */

/* High contrast alternatives for critical elements */
@media not (prefers-contrast: high) {
  .navbar-text-primary {
    color: #f8fafc; /* Slate-50 - 15.8:1 contrast */
  }
  
  .navbar-text-secondary {
    color: #e2e8f0; /* Slate-200 - 12.6:1 contrast */
  }
  
  .cta-primary {
    background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
    color: #1f2937; /* 8.2:1 contrast */
  }
  
  .cta-secondary {
    color: #f1f5f9; /* Slate-100 - 14.1:1 contrast */
    border-color: #f1f5f9;
  }
}

/* ==========================================================================
   Touch Target Sizes
   ========================================================================== */

/* Ensure minimum 44x44px touch targets */
.touch-target-min {
  min-width: 44px;
  min-height: 44px;
}

/* Preferred 48x48px touch targets */
.touch-target-preferred {
  min-width: 48px;
  min-height: 48px;
}

/* Mobile-specific touch enhancements */
@media (pointer: coarse) {
  button,
  a,
  input,
  select,
  textarea {
    min-width: 44px;
    min-height: 44px;
    padding: 0.75rem;
  }
  
  /* Increase spacing between touch targets */
  .space-y-2 > :not([hidden]) ~ :not([hidden]) {
    margin-top: 0.75rem;
  }
  
  .space-x-4 > :not([hidden]) ~ :not([hidden]) {
    margin-left: 1rem;
  }
}

/* ==========================================================================
   Zoom and Responsive Text
   ========================================================================== */

/* Ensure text remains readable at 200% zoom */
@media (min-resolution: 144dpi) and (max-width: 1200px) {
  .text-sm { font-size: 0.9375rem; } /* 15px */
  .text-base { font-size: 1.0625rem; } /* 17px */
  .text-lg { font-size: 1.1875rem; } /* 19px */
  .text-xl { font-size: 1.3125rem; } /* 21px */
  
  /* Adjust spacing for better readability */
  .space-y-2 > :not([hidden]) ~ :not([hidden]) {
    margin-top: 0.625rem;
  }
  
  .space-x-2 > :not([hidden]) ~ :not([hidden]) {
    margin-left: 0.625rem;
  }
}

/* ==========================================================================
   Error States and Validation
   ========================================================================== */

/* Accessible error styling */
.error {
  border-color: #ef4444 !important; /* Red-500 */
  background-color: #fef2f2; /* Red-50 */
  color: #991b1b; /* Red-800 - 4.5:1 contrast */
}

.error:focus {
  outline: 2px solid #ef4444;
  outline-offset: 2px;
  box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.3);
}

/* Success states */
.success {
  border-color: #10b981 !important; /* Green-500 */
  background-color: #ecfdf5; /* Green-50 */
  color: #065f46; /* Green-800 - 4.5:1 contrast */
}

/* Warning states */
.warning {
  border-color: #f59e0b !important; /* Yellow-500 */
  background-color: #fffbeb; /* Yellow-50 */
  color: #92400e; /* Yellow-800 - 4.5:1 contrast */
}

/* ==========================================================================
   Loading and Disabled States
   ========================================================================== */

/* Accessible loading indicators */
.loading-spinner {
  border: 2px solid #e5e7eb; /* Gray-200 */
  border-top-color: #3b82f6; /* Blue-500 */
  animation: spin 1s linear infinite;
}

@media (prefers-reduced-motion: reduce) {
  .loading-spinner {
    animation: none;
    border-top-color: #3b82f6;
    opacity: 0.7;
  }
}

/* Disabled state styling */
.disabled,
:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  pointer-events: none;
}

.disabled:focus,
:disabled:focus {
  outline: 1px solid #9ca3af; /* Gray-400 */
  outline-offset: 1px;
}

/* ==========================================================================
   Print Styles
   ========================================================================== */

@media print {
  /* Ensure good contrast for printing */
  .bg-slate-900,
  .bg-black {
    background: white !important;
    color: black !important;
  }
  
  .text-white {
    color: black !important;
  }
  
  /* Hide decorative elements */
  .animate-pulse,
  .animate-spin,
  .animate-bounce,
  .animate-ping {
    animation: none !important;
  }
  
  /* Ensure focus indicators are visible in print */
  a:focus,
  button:focus {
    outline: 2px solid black !important;
  }
}

/* ==========================================================================
   Dark Mode Specific Accessibility
   ========================================================================== */

@media (prefers-color-scheme: dark) {
  /* Ensure sufficient contrast in dark mode */
  .dark-mode-text-primary {
    color: #f8fafc; /* 15.8:1 contrast on dark backgrounds */
  }
  
  .dark-mode-text-secondary {
    color: #cbd5e1; /* 4.51:1 contrast on dark backgrounds */
  }
  
  .dark-mode-border {
    border-color: #475569; /* Slate-600 */
  }
  
  /* Dark mode focus indicators */
  a:focus,
  button:focus,
  input:focus,
  select:focus,
  textarea:focus {
    outline-color: #fbbf24; /* Yellow-400 */
    box-shadow: 0 0 0 3px rgba(251, 191, 36, 0.3);
  }
}